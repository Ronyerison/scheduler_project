<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="scheduler_core.dashboard_template" owl="1">
        <div class="o_scheduler_dashboard_container">
            <!-- Loading State -->
            <div t-if="state.loading" class="text-center p-4">
                <i class="fa fa-spinner fa-spin fa-2x"></i>
                <p>Carregando dashboard...</p>
            </div>

            <!-- Dashboard Content -->
            <div t-else="">
                <!-- Header com Logo e Info da Empresa -->
                <div class="dashboard-header mb-4">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="d-flex align-items-center">
                                <img
                                    t-att-src="getCompanyLogoUrl()"
                                    alt="Logo da Empresa"
                                    class="company-logo me-3"
                                    style="max-width: 80px; max-height: 80px; object-fit: contain;"
                                />
                                <div>
                                    <h2 class="mb-1" t-esc="state.company.name"/>
                                    <p t-if="state.company.cnpj" class="text-muted mb-0">
                                        CNPJ: <span t-esc="state.company.cnpj"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <p class="text-muted mb-0">
                                <i class="fa fa-calendar me-1"></i>
                                <span t-esc="new Date().toLocaleDateString('pt-BR')"/>
                            </p>
                        </div>
                    </div>
                </div>

                <hr/>

                <!-- Menu Principal -->
                <div class="dashboard-menus">
                    <h3 class="mb-4">
                        <i class="fa fa-th-large me-2"></i>
                        Menu Principal
                    </h3>

                    <div class="row">
                        <div t-foreach="state.menus" t-as="menu" t-key="menu.id" class="col-md-3 col-sm-6 mb-4">
                            <div
                                class="menu-card card h-100 cursor-pointer shadow-sm"
                                t-on-click="() => this.onMenuClick(menu)"
                            >
                                <div class="card-body text-center d-flex flex-column justify-content-center">
                                    <div class="menu-icon mb-3">
                                        <!-- Renderização condicional do ícone -->
                                        <div t-if="menu.icon_type === 'image'" class="menu-image-container">
                                            <img
                                                t-att-src="menu.icon"
                                                t-att-alt="menu.name"
                                                class="module-icon"
                                                style="width: 48px; height: 48px; object-fit: contain;"
                                            />
                                        </div>
                                        <i t-else="" t-att-class="menu.icon + ' fa-3x text-primary'"></i>
                                    </div>
                                    <h5 class="card-title mb-2" t-esc="menu.name"/>

                                    <!-- Descrição simplificada sem função -->
                                    <small class="text-muted">
                                        <span t-if="menu.action">Clique para acessar</span>
                                        <span t-elif="menu.has_children">Ver submenus</span>
                                        <span t-else="">Menu de navegação</span>
                                    </small>

                                    <!-- Badges informativos -->
                                    <div class="mt-2">
                                        <span t-if="menu.has_children" class="badge badge-info me-1">
                                            <i class="fa fa-sitemap me-1"></i>
                                            Submenus
                                        </span>
                                        <span t-if="menu.action" class="badge badge-success">
                                            <i class="fa fa-external-link me-1"></i>
                                            Ação Direta
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div t-if="!state.menus or state.menus.length === 0" class="text-center text-muted">
                        <i class="fa fa-info-circle me-2"></i>
                        Nenhum menu disponível
                    </div>
                </div>

                <!-- Footer -->
                <div class="dashboard-footer mt-5 pt-3 border-top">
                    <div class="row">
                        <div class="col-md-6">
                            <small class="text-muted">
                                <i class="fa fa-code me-1"></i>
                                Agendamento Core v1.0
                            </small>
                        </div>
                        <div class="col-md-6 text-end">
                            <small class="text-muted">
                                Desenvolvido por RDB Software Foundation
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>